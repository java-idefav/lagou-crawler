<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/element.css">
    <script src="../js/vue.min.js"></script>
    <script src="../js/element.js"></script>
    <script src="../js/axios.min.js"></script>
    <title>注册</title>
</head>
<body>
    <dev id="register"  style="text-align: center;">
        <el-card class="box-card" shadow="always" center style="width: 430px;margin: 0 auto;">
            <div slot="header" class="clearfix">
                <span>注册</span>
            </div>
            <el-form ref="form" style="width: 350px;" :mode="form" label-width="80px">
                <el-form-item label="用户名">
                    <el-input v-model="form.userId"></el-input>
                </el-form-item>
                <el-form-item label="密码">
                    <el-input v-model="form.userPwd" show-password></el-input>
                </el-form-item>
                <el-form-item>
                    <el-button type="primary" @click="submitForm">注册</el-button>
                    <el-button @click="resetForm">取消</el-button>
                </el-form-item>
            </el-form>
        </el-card>
    </dev>
    <script>
        new Vue({
                el:"#register",
                data() {
                    return {
                        form: {
                            userId: 'userId',
                            userPwd: 'userPwd'
                        },
                    }
                },
                methods: {
                    submitForm() {
                        axios
                        .post("/lagou/user/adduser",this.form)
                        .then(function (response) {
                            console.log(response);
                            if(response.data){
                                alert('注册成功!')
                                window.location.href="/UserPage/login.html"
                            }else{
                                alert('注册失败!')
                            }
                        })
                        .catch(function (error) {
                            console.log(error);
                        });
                    },
                    resetForm() {
                        this.$refs[formName].resetFields();
                    }
                }
            });
    </script>
</body>
</html>